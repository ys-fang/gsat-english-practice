<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Firebase è¨­ç½®æŒ‡å— - å­¸æ¸¬è‹±æ–‡ç·´ç¿’ç³»çµ±</title>
    <link rel="stylesheet" href="styles/common.css">
    <style>
        .setup-container {
            max-width: 800px;
            margin: 2rem auto;
            padding: 0 20px;
        }
        
        .step {
            background: white;
            border: 2px solid var(--jutor-primary);
            border-radius: 12px;
            margin: 2rem 0;
            overflow: hidden;
        }
        
        .step-header {
            background: var(--jutor-gradient);
            color: white;
            padding: 1rem 1.5rem;
            font-weight: bold;
            font-size: 1.1rem;
        }
        
        .step-content {
            padding: 1.5rem;
        }
        
        .code-block {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 6px;
            padding: 1rem;
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
            margin: 1rem 0;
            overflow-x: auto;
        }
        
        .warning {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            border-radius: 6px;
            padding: 1rem;
            margin: 1rem 0;
        }
        
        .success {
            background: #d4edda;
            border: 1px solid #c3e6cb;
            border-radius: 6px;
            padding: 1rem;
            margin: 1rem 0;
        }
        
        .config-form {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 2rem;
            margin: 2rem 0;
        }
        
        .form-group {
            margin-bottom: 1rem;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: bold;
            color: var(--jutor-primary-dark);
        }
        
        .form-group input {
            width: 100%;
            padding: 0.8rem;
            border: 2px solid var(--jutor-primary);
            border-radius: 6px;
            font-size: 1rem;
        }
        
        .generate-btn {
            background: var(--jutor-primary);
            color: white;
            border: none;
            padding: 1rem 2rem;
            border-radius: 6px;
            cursor: pointer;
            font-weight: bold;
            margin-top: 1rem;
        }
        
        .generate-btn:hover {
            background: var(--jutor-primary-dark);
        }
        
        #generatedConfig {
            display: none;
        }
    </style>
</head>
<body>
    <header class="header">
        <div class="container">
            <div class="brand-logo">
                <span class="brand-text">Jutor</span>
                <span class="brand-separator">|</span>
            </div>
            <h1>Firebase æ•¸æ“šåˆ†æè¨­ç½®æŒ‡å—</h1>
            <p class="subtitle">ç‚ºå­¸æ¸¬è‹±æ–‡ç·´ç¿’ç³»çµ±å•Ÿç”¨æ•¸æ“šæ”¶é›†èˆ‡åˆ†æåŠŸèƒ½</p>
        </div>
    </header>

    <main class="setup-container">
        <div class="step">
            <div class="step-header">ğŸš€ æ­¥é©Ÿ 1ï¼šå‰µå»º Firebase å°ˆæ¡ˆ</div>
            <div class="step-content">
                <ol>
                    <li>å‰å¾€ <a href="https://console.firebase.google.com/" target="_blank" style="color: var(--jutor-primary);">Firebase Console</a></li>
                    <li>é»æ“Šã€Œå‰µå»ºå°ˆæ¡ˆã€æˆ–ã€ŒAdd projectã€</li>
                    <li>å°ˆæ¡ˆåç¨±å»ºè­°ï¼š<code>gsat-english-practice</code></li>
                    <li>å•Ÿç”¨ Google Analyticsï¼ˆæ¨è–¦ï¼‰</li>
                    <li>å®Œæˆå‰µå»º</li>
                </ol>
                
                <div class="warning">
                    <strong>ğŸ’¡ æç¤ºï¼š</strong> ç¢ºä¿ä½ æœ‰ Google å¸³è™Ÿï¼Œä¸¦ä¸”å·²ç™»å…¥ Firebase Consoleã€‚
                </div>
            </div>
        </div>

        <div class="step">
            <div class="step-header">ğŸ”§ æ­¥é©Ÿ 2ï¼šè¨­ç½® Firestore è³‡æ–™åº«</div>
            <div class="step-content">
                <ol>
                    <li>åœ¨ Firebase Console å·¦å´é¸å–®ä¸­ï¼Œé»æ“Šã€ŒFirestore Databaseã€</li>
                    <li>é»æ“Šã€Œå»ºç«‹è³‡æ–™åº«ã€</li>
                    <li>é¸æ“‡ã€Œä»¥æ¸¬è©¦æ¨¡å¼å•Ÿå‹•ã€ï¼ˆç¨å¾Œæœƒè¨­ç½®å®‰å…¨è¦å‰‡ï¼‰</li>
                    <li>é¸æ“‡è³‡æ–™åº«ä½ç½®ï¼ˆå»ºè­°é¸æ“‡ <code>asia-east1</code> æˆ–æœ€è¿‘çš„ä½ç½®ï¼‰</li>
                </ol>
                
                <div class="warning">
                    <strong>âš ï¸ å®‰å…¨æé†’ï¼š</strong> æ¸¬è©¦æ¨¡å¼è®“ä»»ä½•äººéƒ½èƒ½è®€å¯«ä½ çš„è³‡æ–™åº«ã€‚è¨˜å¾—åœ¨ç”Ÿç”¢ç’°å¢ƒä¸­è¨­ç½®é©ç•¶çš„å®‰å…¨è¦å‰‡ã€‚
                </div>
            </div>
        </div>

        <div class="step">
            <div class="step-header">âš™ï¸ æ­¥é©Ÿ 3ï¼šå–å¾—é…ç½®è³‡è¨Š</div>
            <div class="step-content">
                <ol>
                    <li>åœ¨ Firebase Console ä¸­é»æ“Šå°ˆæ¡ˆè¨­å®šï¼ˆé½’è¼ªåœ–ç¤ºï¼‰</li>
                    <li>åœ¨ã€Œä¸€èˆ¬ã€æ¨™ç±¤é ä¸‹æ»‘åˆ°ã€Œä½ çš„æ‡‰ç”¨ç¨‹å¼ã€éƒ¨åˆ†</li>
                    <li>é»æ“Šã€Œ</> ç¶²ç«™ã€åœ–ç¤ºä¾†æ·»åŠ ç¶²ç«™æ‡‰ç”¨ç¨‹å¼</li>
                    <li>æ‡‰ç”¨ç¨‹å¼åç¨±ï¼š<code>GSAT English Practice</code></li>
                    <li>è¤‡è£½é…ç½®ç‰©ä»¶ä¸­çš„è³‡è¨Š</li>
                </ol>
                
                <div class="code-block">
// ä½ æœƒçœ‹åˆ°é¡ä¼¼é€™æ¨£çš„é…ç½®ï¼š
const firebaseConfig = {
  apiKey: "AIzaSyC...",
  authDomain: "your-project.firebaseapp.com",
  projectId: "your-project-id",
  storageBucket: "your-project.appspot.com",
  messagingSenderId: "123456789",
  appId: "1:123456789:web:abc123"
};
                </div>
            </div>
        </div>

        <div class="step">
            <div class="step-header">ğŸ“ æ­¥é©Ÿ 4ï¼šé…ç½®æ‡‰ç”¨ç¨‹å¼</div>
            <div class="step-content">
                <p>ä½¿ç”¨ä¸‹é¢çš„è¡¨å–®ä¾†ç”Ÿæˆä½ çš„é…ç½®æª”æ¡ˆï¼š</p>
                
                <div class="config-form">
                    <div class="form-group">
                        <label for="apiKey">API Key:</label>
                        <input type="text" id="apiKey" placeholder="AIzaSyC...">
                    </div>
                    
                    <div class="form-group">
                        <label for="authDomain">Auth Domain:</label>
                        <input type="text" id="authDomain" placeholder="your-project.firebaseapp.com">
                    </div>
                    
                    <div class="form-group">
                        <label for="projectId">Project ID:</label>
                        <input type="text" id="projectId" placeholder="your-project-id">
                    </div>
                    
                    <div class="form-group">
                        <label for="storageBucket">Storage Bucket:</label>
                        <input type="text" id="storageBucket" placeholder="your-project.appspot.com">
                    </div>
                    
                    <div class="form-group">
                        <label for="messagingSenderId">Messaging Sender ID:</label>
                        <input type="text" id="messagingSenderId" placeholder="123456789">
                    </div>
                    
                    <div class="form-group">
                        <label for="appId">App ID:</label>
                        <input type="text" id="appId" placeholder="1:123456789:web:abc123">
                    </div>
                    
                    <button class="generate-btn" onclick="generateConfig()">ç”Ÿæˆé…ç½®æª”æ¡ˆ</button>
                </div>
                
                <div id="generatedConfig" class="success">
                    <h4>âœ… ç”Ÿæˆçš„é…ç½®æª”æ¡ˆï¼š</h4>
                    <p>è«‹å°‡ä»¥ä¸‹å…§å®¹è¤‡è£½ä¸¦æ›¿æ› <code>firebase/config.js</code> ä¸­çš„é…ç½®ï¼š</p>
                    <div class="code-block" id="configOutput"></div>
                    <button class="btn btn-primary" onclick="copyConfig()">ğŸ“‹ è¤‡è£½é…ç½®</button>
                </div>
            </div>
        </div>

        <div class="step">
            <div class="step-header">ğŸ”’ æ­¥é©Ÿ 5ï¼šè¨­ç½®å®‰å…¨è¦å‰‡</div>
            <div class="step-content">
                <p>åœ¨ Firestore Database çš„ã€ŒRulesã€æ¨™ç±¤ä¸­ï¼Œä½¿ç”¨ä»¥ä¸‹è¦å‰‡ï¼š</p>
                
                <div class="code-block">
rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    // å…è¨±è®€å¯«ç”¨æˆ¶è‡ªå·±çš„æ•¸æ“š
    match /users/{userId} {
      allow read, write: if true; // åŒ¿åç”¨æˆ¶ï¼Œæš«æ™‚å…è¨±æ‰€æœ‰æ“ä½œ
    }
    
    // å…è¨±å¯«å…¥ç­”é¡Œè¨˜éŒ„ï¼Œä½†ä¸å…è¨±è®€å–ä»–äººæ•¸æ“š
    match /exam_answers/{document} {
      allow write: if true;
      allow read: if resource.data.user_id == request.auth.uid;
    }
    
    // å…è¨±å¯«å…¥è€ƒè©¦æœƒè©±
    match /exam_sessions/{document} {
      allow write: if true;
      allow read: if resource.data.user_id == request.auth.uid;
    }
    
    // å­¸ç¿’åˆ†ææ•¸æ“šï¼ˆåƒ…å¯«å…¥ï¼‰
    match /learning_analytics/{document} {
      allow write: if true;
    }
  }
}
                </div>
                
                <div class="warning">
                    <strong>ğŸ”§ èªªæ˜ï¼š</strong> é€™äº›è¦å‰‡å…è¨±åŒ¿åå¯«å…¥æ•¸æ“šï¼Œä½†é™åˆ¶è®€å–æ¬Šé™ã€‚åœ¨ç”Ÿç”¢ç’°å¢ƒä¸­ï¼Œä½ å¯èƒ½éœ€è¦æ›´åš´æ ¼çš„è¦å‰‡ã€‚
                </div>
            </div>
        </div>

        <div class="step">
            <div class="step-header">ğŸ§ª æ­¥é©Ÿ 6ï¼šæ¸¬è©¦æ•´åˆ</div>
            <div class="step-content">
                <ol>
                    <li>ç¢ºä¿æ‰€æœ‰ Firebase ç›¸é—œæª”æ¡ˆéƒ½å·²æ­£ç¢ºé…ç½®</li>
                    <li>åœ¨ç€è¦½å™¨ä¸­é–‹å•Ÿä»»ä¸€è€ƒè©¦é é¢</li>
                    <li>é–‹å•Ÿç€è¦½å™¨é–‹ç™¼è€…å·¥å…·çš„ Console</li>
                    <li>æŸ¥çœ‹æ˜¯å¦æœ‰ Firebase åˆå§‹åŒ–æˆåŠŸçš„è¨Šæ¯</li>
                    <li>ä½œç­”å¹¾é¡Œï¼Œæª¢æŸ¥æ•¸æ“šæ˜¯å¦æ­£å¸¸æ”¶é›†</li>
                </ol>
                
                <div class="success">
                    <strong>ğŸ‰ æˆåŠŸæ¨™èªŒï¼š</strong>
                    <ul>
                        <li>Console é¡¯ç¤ºã€Œâœ… GSAT Analytics å·²åˆå§‹åŒ–ã€</li>
                        <li>ç­”é¡Œå¾Œé¡¯ç¤ºã€ŒğŸ“ è¨˜éŒ„ç­”é¡Œã€è¨Šæ¯</li>
                        <li>Firestore ä¸­å‡ºç¾æ–°çš„æ•¸æ“šè¨˜éŒ„</li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="step">
            <div class="step-header">ğŸ“Š æ­¥é©Ÿ 7ï¼šæŸ¥çœ‹æ•¸æ“š</div>
            <div class="step-content">
                <p>é…ç½®å®Œæˆå¾Œï¼Œä½ å¯ä»¥åœ¨ä»¥ä¸‹ä½ç½®æŸ¥çœ‹æ”¶é›†åˆ°çš„æ•¸æ“šï¼š</p>
                
                <ul>
                    <li><strong>Firestore Database</strong>ï¼šåœ¨ Firebase Console ä¸­æŸ¥çœ‹åŸå§‹æ•¸æ“š</li>
                    <li><strong>Analytics Dashboard</strong>ï¼šå¦‚æœå•Ÿç”¨äº† Google Analytics</li>
                    <li><strong>è‡ªè¨‚å ±å‘Š</strong>ï¼šæœªä¾†å¯ä»¥å»ºç«‹è‡ªè¨‚çš„æ•¸æ“šåˆ†æå„€è¡¨æ¿</li>
                </ul>
                
                <div class="warning">
                    <strong>ğŸ“ˆ æ•¸æ“šçµæ§‹ï¼š</strong>
                    <ul>
                        <li><code>users</code>ï¼šç”¨æˆ¶çµ±è¨ˆè³‡è¨Š</li>
                        <li><code>exam_answers</code>ï¼šç­”é¡Œè¨˜éŒ„ï¼ˆæ‰¹æ¬¡ï¼‰</li>
                        <li><code>exam_sessions</code>ï¼šå®Œæ•´è€ƒè©¦æœƒè©±</li>
                        <li><code>learning_analytics</code>ï¼šå­¸ç¿’åˆ†ææ•¸æ“š</li>
                    </ul>
                </div>
            </div>
        </div>

        <div style="text-align: center; margin: 3rem 0;">
            <a href="index.html" class="btn btn-primary">å›åˆ°é¦–é é–‹å§‹æ¸¬è©¦</a>
        </div>
    </main>

    <footer class="footer">
        <div class="container">
            <p>&copy; 2025 å­¸æ¸¬è‹±æ–‡ç·´ç¿’ç³»çµ± - è³‡æ–™ä¾†æºï¼šå¤§å­¸å…¥å­¸è€ƒè©¦ä¸­å¿ƒ</p>
            <p class="brand-footer">Powered by <strong>Jutor</strong> - æ™ºæ…§å­¸ç¿’å¹³å°</p>
        </div>
    </footer>

    <script>
        function generateConfig() {
            const apiKey = document.getElementById('apiKey').value;
            const authDomain = document.getElementById('authDomain').value;
            const projectId = document.getElementById('projectId').value;
            const storageBucket = document.getElementById('storageBucket').value;
            const messagingSenderId = document.getElementById('messagingSenderId').value;
            const appId = document.getElementById('appId').value;

            if (!apiKey || !authDomain || !projectId) {
                alert('è«‹å¡«å¯«å¿…è¦çš„é…ç½®è³‡è¨Šï¼ˆAPI Keyã€Auth Domainã€Project IDï¼‰');
                return;
            }

            const configCode = `// Firebase é…ç½® - è‡ªå‹•ç”Ÿæˆæ–¼ ${new Date().toLocaleString()}
const firebaseConfig = {
  apiKey: "${apiKey}",
  authDomain: "${authDomain}",
  projectId: "${projectId}",
  storageBucket: "${storageBucket}",
  messagingSenderId: "${messagingSenderId}",
  appId: "${appId}"
};`;

            document.getElementById('configOutput').textContent = configCode;
            document.getElementById('generatedConfig').style.display = 'block';
            
            // æ»¾å‹•åˆ°é…ç½®å€åŸŸ
            document.getElementById('generatedConfig').scrollIntoView({ behavior: 'smooth' });
        }

        function copyConfig() {
            const configText = document.getElementById('configOutput').textContent;
            
            if (navigator.clipboard) {
                navigator.clipboard.writeText(configText).then(() => {
                    alert('âœ… é…ç½®å·²è¤‡è£½åˆ°å‰ªè²¼ç°¿ï¼');
                });
            } else {
                // é™ç´šæ–¹æ¡ˆ
                const textArea = document.createElement('textarea');
                textArea.value = configText;
                document.body.appendChild(textArea);
                textArea.select();
                document.execCommand('copy');
                document.body.removeChild(textArea);
                alert('âœ… é…ç½®å·²è¤‡è£½åˆ°å‰ªè²¼ç°¿ï¼');
            }
        }
    </script>
</body>
</html>